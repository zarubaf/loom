# Transform counter design with scan chain
# No DPI calls - pure scan chain testing

# Read the design
read_slang counter.sv

# Show original design
hierarchy -top multi_counter
stat

# Process sequential logic
proc

# Insert scan chain with mapping file
scan_insert -map scan_map_counter.json

# Generate emulation wrapper (no DPI, but still useful for clock gating)
emu_top -top multi_counter

# Optimize
opt

# Write transformed design
write_verilog -noattr transformed_counter.v

# Summary
stat
