# SPDX-License-Identifier: Apache-2.0
# Transform design for emulation with emu_top wrapper

# Read the design
read_slang ../fixtures/dpi_example.sv

# Elaborate
hierarchy -check -top dpi_example
proc

# Run loom transformation passes
dpi_bridge
scan_insert

# Generate emu_top wrapper
emu_top -top dpi_example -clk clk -rst rst

# Write transformed design (loom_clk_gate will be a blackbox reference)
# The actual loom_clk_gate module is provided separately for simulation
write_verilog -noattr transformed.v
